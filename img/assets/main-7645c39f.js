import{L as ee,F as te,S as ne,E as oe,W as ie,P as se,a as ce,C as ae,b as le,M as re,c as he}from"./three.module-2d38c21e.js";class de extends ee{constructor(t){super(t)}load(t,e,n,s){const c=this,a=new te(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(r){const h=c.parse(JSON.parse(r));e&&e(h)},n,s)}parse(t){return new fe(t)}}class fe{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){const n=[],s=ue(t,e,this.data);for(let c=0,a=s.length;c<a;c++)n.push(...s[c].toShapes());return n}}function ue(g,t,e){const n=Array.from(g),s=t/e.resolution,c=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*s,a=[];let r=0,h=0;for(let p=0;p<n.length;p++){const d=n[p];if(d===`
`)r=0,h-=c;else{const f=ge(d,s,r,h,e);r+=f.offsetX,a.push(f.path)}}return a}function ge(g,t,e,n,s){const c=s.glyphs[g]||s.glyphs["?"];if(!c){console.error('THREE.Font: character "'+g+'" does not exists in font family '+s.familyName+".");return}const a=new ne;let r,h,p,d,f,y,k,b;if(c.o){const o=c._cachedOutline||(c._cachedOutline=c.o.split(" "));for(let i=0,S=o.length;i<S;)switch(o[i++]){case"m":r=o[i++]*t+e,h=o[i++]*t+n,a.moveTo(r,h);break;case"l":r=o[i++]*t+e,h=o[i++]*t+n,a.lineTo(r,h);break;case"q":p=o[i++]*t+e,d=o[i++]*t+n,f=o[i++]*t+e,y=o[i++]*t+n,a.quadraticCurveTo(f,y,p,d);break;case"b":p=o[i++]*t+e,d=o[i++]*t+n,f=o[i++]*t+e,y=o[i++]*t+n,k=o[i++]*t+e,b=o[i++]*t+n,a.bezierCurveTo(f,y,k,b,p,d);break}}return{offsetX:c.ha*t,path:a}}class pe extends oe{constructor(t,e={}){const n=e.font;if(n===void 0)super();else{const s=n.generateShapes(t,e.size);e.depth=e.height!==void 0?e.height:50,e.bevelThickness===void 0&&(e.bevelThickness=10),e.bevelSize===void 0&&(e.bevelSize=8),e.bevelEnabled===void 0&&(e.bevelEnabled=!1),super(s,e)}this.type="TextGeometry"}}class be{constructor(t,e=" .:-=+*#%@",n={}){const s=n.resolution||.15,c=n.scale||1,a=n.color||!1,r=n.alpha||!1,h=n.block||!1,p=n.invert||!1,d=n.strResolution||"low";let f,y;const k=document.createElement("div");k.style.cursor="default";const b=document.createElement("table");k.appendChild(b);let o,i,S;this.setSize=function(l,x){f=l,y=x,t.setSize(l,x),_()},this.render=function(l,x){t.render(l,x),Y(b)},this.domElement=k;function _(){o=Math.floor(f*s),i=Math.floor(y*s),T.width=o,T.height=i,S=t.domElement,S.style.backgroundColor&&(b.rows[0].cells[0].style.backgroundColor=S.style.backgroundColor,b.rows[0].cells[0].style.color=S.style.color),b.cellSpacing=0,b.cellPadding=0;const l=b.style;l.whiteSpace="pre",l.margin="0px",l.padding="0px",l.letterSpacing=u+"px",l.fontFamily=U,l.fontSize=Z+"px",l.lineHeight=X+"px",l.textAlign="left",l.textDecoration="none"}const K=" .,:;i1tfLCG08@".split(""),Q=" CGO08@".split(""),U="courier new, monospace",V=t.domElement,T=document.createElement("canvas");if(!T.getContext)return;const L=T.getContext("2d");if(!L.getImageData)return;let M=a?Q:K;e&&(M=e);const Z=2/s*c,X=2/s*c;let u=0;if(d=="low")switch(c){case 1:u=-1;break;case 2:case 3:u=-2.1;break;case 4:u=-3.1;break;case 5:u=-4.15;break}if(d=="medium")switch(c){case 1:u=0;break;case 2:u=-1;break;case 3:u=-1.04;break;case 4:case 5:u=-2.1;break}if(d=="high")switch(c){case 1:case 2:u=0;break;case 3:case 4:case 5:u=-1;break}function Y(l){L.clearRect(0,0,o,i),L.drawImage(V,0,0,o,i);const x=L.getImageData(0,0,o,i).data;let F="";for(let P=0;P<i;P+=2){for(let B=0;B<o;B++){const H=(P*o+B)*4,R=x[H],W=x[H+1],D=x[H+2],$=x[H+3];let I,G;G=(.3*R+.59*W+.11*D)/255,$==0&&(G=1),I=Math.floor((1-G)*(M.length-1)),p&&(I=M.length-I-1);let v=M[I];(v===void 0||v==" ")&&(v="&nbsp;"),a?F+="<span style='color:rgb("+R+","+W+","+D+");"+(h?"background-color:rgb("+R+","+W+","+D+");":"")+(r?"opacity:"+$/255+";":"")+"'>"+v+"</span>":F+=v}F+="<br/>"}l.innerHTML=`<tr><td style="display:block;width:${f}px;height:${y}px;overflow:hidden">${F}</td></tr>`}}}let C,m,q,z,A,O,N,j,E,w;function me(){m=document.getElementById("canvas"),q=new ie,C=new be(q,"AAAAADM ",{invert:!1}),C.domElement.style.color="orange",C.domElement.style.pointerEvents="none",m.appendChild(C.domElement),C.setSize(m.clientWidth,m.clientHeight);function g(){z.aspect=m.clientWidth/m.clientHeight,C.setSize(m.clientWidth,m.clientHeight)}window.addEventListener("resize",g),z=new se(30,m.clientWidth/m.clientHeight,1,1500),z.position.set(0,0,2),z.lookAt(0,0,0),A=new ce,A.background=new ae(0),O=new le(16777215,1,0,0),O.position.set(0,1,1),A.add(O),N=new re({color:16711935}),new de().load("misc/OCR-A_Regular.json",function(e){console.log(e),j=e;const n=.4;E=new pe("STP",{font:j,size:n,height:.05}),E.computeBoundingBox();const s=-.5*(E.boundingBox.max.x-E.boundingBox.min.x);w=new he(E,N),w.geometry.translate(s,0,0),w.position.y=-n/2,w.position.z=0,w.rotation.x=0,w.rotation.y=Math.PI*2,A.add(w)})}function J(){requestAnimationFrame(J),xe()}function xe(){w.rotation.y+=.01,q.clear(),C.render(A,z)}me();J();
